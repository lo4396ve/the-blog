(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{379:function(n,t,e){"use strict";e.r(t);var i=e(45),o=Object(i.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"new-vue做了什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#new-vue做了什么"}},[n._v("#")]),n._v(" new Vue做了什么")]),n._v(" "),e("p",[n._v("本章基于"),e("a",{attrs:{href:"https://github.com/lo4396ve/vue-analysis/tree/simple",target:"_blank",rel:"noopener noreferrer"}},[n._v("vue简易版"),e("OutboundLink")],1),n._v("分析，建议先阅读简易版代码，后面的篇幅贴出的代码也是基于这个版本，如果没有读过简易版，也可以在本地看着vue源码跟随后面文章节奏，因为它们的逻辑是一样的，只不过简易版忽略了一些用不到的逻辑。")]),n._v(" "),e("p",[n._v("打开mysrc/core/instance/index.js,")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("import { initMixin } from './init'\n...\nfunction Vue (options) {\n  // init方法啊在initMixin被定义\n  this._init(options)\n}\n...\n\ninitMixin(Vue)\n")])])]),e("p",[n._v("_init方法在mysrc/core/instance/init.js定义")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("export function initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    console.log('_init')\n    const vm = this\n    // a uid\n    vm._uid = uid++\n\n    // a flag to avoid this being observed\n    /*一个防止vm实例自身被观察的标志位*/\n    vm._isVue = true\n    // merge options \n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options)\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      )\n    }\n    vm._renderProxy = vm\n    vm._self = vm\n    initRender(vm)\n    initState(vm)\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n}\n")])])]),e("p",[n._v("_init方法主要做了合并配置、初始化渲染方法、初始化watcher工作。这些工作无非是为了后续的挂载工作做准备，挂载就是把vue组件生成的虚拟挂载到浏览器页面。")])])}),[],!1,null,null,null);t.default=o.exports}}]);